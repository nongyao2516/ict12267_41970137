<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<!-- NAVBAR -->
<nav class="navbar navbar-dark bg-primary">
  <div class="container">
    <span class="navbar-brand">My Shop</span>

    <button class="btn btn-warning position-relative" onclick="viewCart()">
      üõí Cart
      <span id="cartBadge"
            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
        0
      </span>
    </button>
  </div>
</nav>

<!-- CONTENT -->
<div class="container mt-4">

  <h3 class="mb-3">‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>

  <div class="row" id="productList"></div>

</div>

<script>

const products = [
 { id: 1, name: "Laptop Gaming", price: 25900, image: "image/pp1.jpg" },
 { id: 2, name: "Smartphone Pro", price: 18900, image: "image/pp1.jpg" },
 { id: 3, name: "Wireless Headphone", price: 2900, image: "image/pp1.jpg" },
 { id: 4, name: "Mechanical Keyboard", price: 3500, image: "image/pp1.jpg" }
];

function renderProducts() {
 const container = document.getElementById("productList");

 container.innerHTML = "";

 products.forEach(product => {

   container.innerHTML += `
    <div class="col-6 col-md-3 mb-4">
      <div class="card shadow-sm h-100">

        <a href="detail.html?id=${product.id}">
          <img src="${product.image}" class="card-img-top">
        </a>

        <div class="card-body">
          <h5 class="card-title">${product.name}</h5>
          <p class="text-danger fw-bold">
            ‡∏ø${product.price.toLocaleString()}
          </p>

          <a href="detail.html?id=${product.id}"
             class="btn btn-primary w-100 mb-2">
            ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
          </a>

          <button class="btn btn-success w-100"
                  onclick="addToCart(${product.id})">
            Add to Cart
          </button>
        </div>

      </div>
    </div>
   `;
 });
}

function addToCart(id) {
 let cart = JSON.parse(localStorage.getItem("cart")) || [];

 const product = products.find(p => p.id === id);
 const existing = cart.find(item => item.id === id);

 if (existing) {
   existing.qty += 1;
 } else {
   cart.push({ ...product, qty: 1 });
 }

 localStorage.setItem("cart", JSON.stringify(cart));
 updateBadge();
}

function updateBadge() {
 let cart = JSON.parse(localStorage.getItem("cart")) || [];

 let totalQty = cart.reduce((sum, item) => sum + item.qty, 0);

 document.getElementById("cartBadge").innerText = totalQty;
}

function viewCart() {
 console.log(JSON.parse(localStorage.getItem("cart")) || []);
 alert("‡∏î‡∏π Cart ‡πÉ‡∏ô Console");
}

renderProducts();
updateBadge();

</script>

</body>
</html>